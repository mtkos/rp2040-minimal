.set RESETS_BASE, 0x4000c000
.set RESETS_RESET_OFFSET, 0x0
.set REG_ALIAS_CLR_BITS, 0x3000
.set RESETS_RESET_IO_BANK0_BITS, 1<<5
.set RESETS_RESET_DONE_OFFSET, 0x8
.set RESETS_RESET_DONE_IO_BANK0_BITS, 1<<5
.set IO_BANK0_BASE, 0x40014000
.set IO_BANK0_GPIO0_CTRL_OFFSET, 0x4 + 25*0x8
.set GPIO_FUNC_SIO, 5
.set SIO_BASE, 0xd0000000
.set SIO_GPIO_OE_SET_OFFSET, 0x24
.set SIO_GPIO_OUT_XOR_OFFSET, 0x1c
.set PIN, 25

ldr r0, = RESETS_BASE + REG_ALIAS_CLR_BITS
mov r1, # RESETS_RESET_IO_BANK0_BITS
str r1, [r0, # RESETS_RESET_OFFSET]

mov r2, # RESETS_RESET_DONE_IO_BANK0_BITS
ldr r0, = RESETS_BASE
0:
ldr r1, [r0, # RESETS_RESET_DONE_OFFSET]
mvn r1, r1
and r1, r1, r2
bne 0b

ldr r0, = IO_BANK0_BASE
mov r1, # GPIO_FUNC_SIO
mov r2, # IO_BANK0_GPIO0_CTRL_OFFSET
str r1, [r0, r2]

ldr r0, = SIO_BASE
ldr r2, = (1<<PIN)
str r2, [r0, # SIO_GPIO_OE_SET_OFFSET]

1:
str r2, [r0, # SIO_GPIO_OUT_XOR_OFFSET]

ldr r1, = 1000000
2:
sub r1, # 1
bne 2b

b 1b
